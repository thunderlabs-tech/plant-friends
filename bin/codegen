#!/usr/bin/env sh
set -e
. $(dirname "$0")/.include.sh

DEST_PATH="web-client/src/gen"

echo "ðŸ§¹ Clear existing generated code"
rm -rf ${DEST_PATH}

echo "\nðŸ”¨ Generate Amplify schema, queries and models"
amplify api gql-compile
amplify codegen
amplify codegen models

echo "\nðŸ˜  Correct Amplify hardcoded output path"
mkdir ${DEST_PATH}
mv ${AMPLIFY_OUTPUT_PATH}/* ${DEST_PATH}
rmdir ${AMPLIFY_OUTPUT_PATH}

echo "\nâœ¨ Run prettier on generated code"
prettier -w ${DEST_PATH}

echo "âœ” Done!"
